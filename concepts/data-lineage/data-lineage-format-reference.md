---
description: >-
  https://github.com/sqlparser/sqlflow_public/blob/master/doc/data-lineage-format/data-lineage-format-reference.md
---

# Data lineage format reference

This page gives a detail reference of the data lineage response format which is returned on [SQLFlow UI](../../introduction/ui/).  The SQLFlow UI gets result from the /sqlflow/generation/sqlflow/graph endpoint and having following elements:

### 1. Top level elements

```json
{
	"code": 200,
	"data": {
		"mode": "global",
		"summary": {
		},
		"sqlflow": {
		},
		"graph": {
		}
	},
	"sessionId": "3bf4a61f5d41a016d0f91f28c2c1791d7100e1c159c31dab4e1f3bce603afd1c_1663684880303",
  	"jobId": "JobId",  
	"error": "error msgs",
}
```

* code: Http Status code, 200 for OK. 4XX **** for cases in which the client seems to have erred such as no authorization or bad request. 500 for internal server error. Error messages would be present in _`error`_ If the code is not 200 (request is not a success).
* data: data payload
  * mode: data mode. Could be _`global`_ or _`summary`_. Will be set to _ `summary` _ mode when the relation number exceeds the _`relation_limit`_
    * _`global`_ show all data
    * _`summary`_ only share the statics information and there's no graph information. No field data in the table and only table info. Users need to invoke [REST Api](../../api-docs/sqlflow-rest-api-reference/) to get the field data in detail.
  * [summary](data-lineage-format-reference.md#2.-summary-payload): payload for statics information in _`summary`_ mode
  * sqlflow: data model of the analysis result
  * graph: graph model of the analysis result
* sessionId: session id, used to get the cache information in [Query mode](../../introduction/getting-started/different-modes-in-gudu-sqlflow/query-mode.md)
* jobId: job id, used to get the cache informaion in [Job mode](../../introduction/getting-started/different-modes-in-gudu-sqlflow/job-mode.md)
* error: contains error messages if the status code is not 200

### 2. Summary payload

```json
"summary": {
	"schema": 1,
	"process": 2,
	"database": 0,
	"view": 1,
	"mostRelationTables": [{
		"table": "SMALL_ORDERS"
	}, {
		"table": "MEDIUM_ORDERS"
	}, {
		"table": "LARGE_ORDERS"
	}],
	"column": 43,
	"relationship": 41,
	"table": 7
}
```

* database: database number
* schema: schema number
* table: table number
* view: view number
* column: column number
* relationship: relationship number
* process: process number
* mostRelationTables: the top three tables which contains the most relationships

### 2. dbobjs

This is an array that includes all database objects discovered during the data lineage analysis. JSON PATH: `$.dbobjs`.

#### Attributes

* id, this is the unique identifier of this object in the data lineage result.
* name, name of the object.
* type, type of the object such as table, view, process.
* coordinates, position of the object in the SQL script.
* columns, optional, valid when type is table, view

### 3. realtions

Relation is the atom unit of the data lineage. Relation build a link between the source and target column( column-level lineage).

Those relations are stored in the `$.relations`.

A relation includes the `type`, `target`, `sources` and other attributes.

#### Attributes

* id
* type
* effectType
* target, is an object
* sources, array of source objects
* processid, optional

### List of the elements in data lineage

#### 1. Database object

* schema

#### 2. Schema object

* table, including external table
* view
* procedure
* function
* trigger

#### 3. Hdfs object

* file, such as `/user/data/pv_2008-06-08_us.txt, gs://bucket/path1.csv`
* directory, such as `s3://load/encrypted_files/`, `@exttable_part_stage/logs/`
* stage, this is a directory.

#### 4. SQL object

Object created temporary during the execution of the SQL statement.

* select list
* merge insert
* merge update
* update set
* update select
* insert select
* function call
* union
* CTE
* pivot table
* snowflake pivot alias
* sql server open json
* sql server join property
* set of rows ( constructed through the values expression, used in the place where table occurs)
* process, this the the SQL query that does the data transform.

#### 5. Relation

* fdd , dataflow
* fdr , data impact

#### 6. join

#### 7. Abbreviation of the object

The abbreviation of the object used in the diagram generated by the Gudu SQLFlow.

* CTE \[C]
* directory \[D]
* function \[F]
* function call \[F]
* file \[FL]
* insert select \[IS]
* join property \[JP] (sql server)
* merge insert \[MI]
* merge update \[MU]
* open json \[OJ] (sql server)
* pivot alias \[PA] (snowflake)
* pivot table \[PT]
* procedure \[P]
* select list \[L]
* set of rows \[RW]
* stage \[S]
* table \[T]
* trigger \[TR]
* union \[U]
* update set \[UE]
* update select \[US]
* view \[V]
