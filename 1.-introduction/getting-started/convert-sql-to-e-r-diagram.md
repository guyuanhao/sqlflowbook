---
description: https://blog.sqlflow.cn/gudu-sqlflow-er-diagram/
---

# Convert SQL to E-R Diagram

[Gudu SQLFlow](https://sqlflow.gudusoft.com/#/) is capable to convert **SQL to Entity-Relation(ER) Diagram** as well as to visualize the relations between tables and fields so that you can quickly understand the design model of the database and conduct efficient team communication.

## Two Sources of Visualization ER Model

*   From SQL Script

    SQLFlow can analyze Database creation SQL script and visualize the provided scripts. In order to create ER diagram, user need to provide SQL statements such as `create table` or `alter table` and include foreign keys.&#x20;
*   From Database

    You can simply make SQLFlow connect to your database for the ER diagram. SQLFlow will automatically retrieve metadata from the database and generate the ER diagram.

## Three Ways to Visualize ER Model

Let's now take a look on how exactly to use [Gudu SQLFlow](https://sqlflow.gudusoft.com/#/).&#x20;

[Gudu SQLFlow](https://sqlflow.gudusoft.com/#/) provides three ways:

### 1. Paste SQL Statements into the SQLText Editor

Directly paste your SQL statements into the SQLText Editor

<figure><img src="../../.gitbook/assets/image (10).png" alt=""><figcaption></figcaption></figure>

Click the icon of the ER model and you will have the correspond ER diagram instantly.

<figure><img src="../../.gitbook/assets/image (4).png" alt=""><figcaption></figcaption></figure>

### 2. Upload SQL files

Click `upload sql`

<figure><img src="../../.gitbook/assets/image (7).png" alt=""><figcaption></figcaption></figure>

Choose `upload file` as the job source and choose the SQL type in the `dbvendor`. Upload file and create the [Job](../ui/job-management/).

<figure><img src="../../.gitbook/assets/image (9).png" alt=""><figcaption></figcaption></figure>

Choose the job in the job list panel when it is complete.

<figure><img src="../../.gitbook/assets/image (8).png" alt=""><figcaption></figcaption></figure>

Click `show ER diagram` in the schema explorer and check the result.

<figure><img src="../../.gitbook/assets/image.png" alt=""><figcaption></figcaption></figure>

### 3. Connect to DB

Connect to your database for the ER diagram:

<figure><img src="../../.gitbook/assets/image (11).png" alt=""><figcaption></figcaption></figure>

Choose the job in the job list panel when it is complete.

<figure><img src="../../.gitbook/assets/image (13).png" alt=""><figcaption></figcaption></figure>

Click `show ER diagram` in the schema explorer and check the result.

<figure><img src="../../.gitbook/assets/image (1) (1).png" alt=""><figcaption></figcaption></figure>

## E-R Diagram

The following capture is the ER diagram of [Northwind database](https://github.com/pthom/northwind\_psql) generated by [Gudu SQLFlow](https://sqlflow.gudusoft.com/#/). We will have tables, fields, field types and different kinds of key which are under different icons in the diagram.&#x20;

<figure><img src="../../.gitbook/assets/image (2).png" alt=""><figcaption></figcaption></figure>

## SQL Required to Create ER Diagram

In order to create ER diagram, foreign keys should be included in the provided SQL files. Other keys such as primary key, index key or unique key are not mandatory.

### **A) Foreign key**

Foreign key is to build ER relations between different tables. Statements such as `create table` and `alter table` usually contain this information.

#### 1. **Foreign key in create table**

```sql
CREATE TABLE SCOTT.EMP 
   (	
	EMPNO NUMBER(4,0), 
	ENAME VARCHAR2(10), 

	DEPTNO NUMBER(2,0), 
	 CONSTRAINT PK_EMP PRIMARY KEY (EMPNO),
	 FOREIGN KEY(DEPTNO) REFERENCES SCOTT.DEPT(DEPTNO)
   );
```

#### 2. **Foreign key in alter table**

```sql
ALTER TABLE SCOTT.EMP ADD CONSTRAINT FK_DEPTNO FOREIGN KEY ("DEPTNO")
	  REFERENCES SCOTT.DEPT ("DEPTNO") ENABLE;
```

**B) Primary key, index key, unique key**

#### 1. P**rimary key**

Primary key can be specified in `create table` and `alter table` statement.

```sql
CREATE TABLE SCOTT.EMP 
   (	
	EMPNO NUMBER(4,0), 
	ENAME VARCHAR2(10), 

	DEPTNO NUMBER(2,0), 
	 CONSTRAINT PK_EMP PRIMARY KEY (EMPNO),
	 FOREIGN KEY(DEPTNO) REFERENCES SCOTT.DEPT(DEPTNO)
   );
```

```sql
ALTER TABLE SCOTT.DEPT
ADD CONSTRAINT dept_pk PRIMARY KEY (DEPTNO);
```

Icon of **primary key in ER diagram**

<figure><img src="../../.gitbook/assets/image (3).png" alt=""><figcaption></figcaption></figure>

**2. Unique key**

Unique key can be specified in `create table` and `alter table` statement.

```sql
CREATE TABLE SCOTT.DEPT 
   (
    DEPTNO NUMBER(2,0), 
	DNAME VARCHAR2(14), 
	LOC VARCHAR2(13),
	CONSTRAINT constraint_name UNIQUE (DEPTNO)
   ) ;
```

```sql
ALTER TABLE SCOTT.DEPT 
ADD CONSTRAINT constraint_name UNIQUE (DEPTNO);  
```

Icon of **unique key in ER diagram**

<figure><img src="../../.gitbook/assets/image (5).png" alt=""><figcaption></figcaption></figure>

#### 3. I**ndex key**

Index key can be specified using `create index` statement.

```sql
-- Oracle
CREATE INDEX SCOTT.DEPT_INDEX 
ON SCOTT.DEPT (LOC);
```

Or alter table add index

```sql
-- MySQL
ALTER TABLE
    `ticketit` ADD INDEX `ticketit_subject_index`(`subject`);
```

Icon of **index key in ER diagram**

<figure><img src="../../.gitbook/assets/image (6).png" alt=""><figcaption></figcaption></figure>

###
